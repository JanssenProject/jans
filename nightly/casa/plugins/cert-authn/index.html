

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Janssen Project Deployment and Operation References">
      
      
        <meta name="author" content="Janssen, Inc.">
      
      
        <link rel="canonical" href="https://docs.jans.io/nightly/casa/plugins/cert-authn/">
      
      
        <link rel="prev" href="../email-otp/">
      
      
        <link rel="next" href="../cert-authn-tutorial/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/janssen_project_favicon_transparent_50px_50px.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Client certificate authentication - Janssen Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../css/tabs.css">
    
      <link rel="stylesheet" href="../../../stylesheets/mermaid-extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/home.css">
    
      <link rel="stylesheet" href="../../../stylesheets/navigation.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#client-certificate-authentication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Janssen Documentation" class="md-header__button md-logo" aria-label="Janssen Documentation" data-md-component="logo">
      
  <img src="../../../assets/janssen_project.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Janssen Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Client certificate authentication
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/JanssenProject/jans/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/architecture/" class="md-tabs__link">
          
  
  
    
  
  Architecture & Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/auth-server/" class="md-tabs__link">
          
  
  
    
  
  Integrate & Authenticate

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../janssen-server/config-guide/" class="md-tabs__link">
          
  
  
    
  
  Configure Identity & Policies

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/test-debug/" class="md-tabs__link">
          
  
  
    
  
  Test & Debug

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/" class="md-tabs__link">
          
  
  
    
  
  Deploy & Operate

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../CHANGELOG/" class="md-tabs__link">
          
  
  
    
  
  Product & Releases

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Janssen Documentation" class="md-nav__button md-logo" aria-label="Janssen Documentation" data-md-component="logo">
      
  <img src="../../../assets/janssen_project.svg" alt="logo">

    </a>
    Janssen Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JanssenProject/jans/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../.." class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/architecture/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Architecture & Concepts
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Integrate & Authenticate
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../janssen-server/config-guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Configure Identity & Policies
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configure Identity & Policies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../janssen-server/config-guide/config-tools/jans-tui/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Configuration Tools
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/client-management/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Clients & Applications
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/scopes/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Scopes & Claims
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/usermgmt/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    User Management
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/scim/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    SCIM
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/config-guide/custom-scripts-config/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Custom Scripts
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/config/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Auth Server Settings
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Casa (Self-Service Portal)
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Casa (Self-Service Portal)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../administration/admin-console/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Administration
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_9_3" id="__nav_4_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_9_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_9_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plugins
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2fa-settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2FA Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../accts-linking/account-linking-index/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Accounts Linking
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bioid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BioID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consent-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consent Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-branding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Branding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../email-otp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email OTP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9_3_7" checked>
        
          
          <label class="md-nav__link" for="__nav_4_9_3_7" id="__nav_4_9_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Certificate Authentication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_9_3_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_9_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Certificate Authentication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Client certificate authentication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Client certificate authentication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-testing-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate testing certificates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Generate testing certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-client-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import client certificates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-a-cert-pickup-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup a cert pickup URL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup a cert pickup URL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-and-configure-the-agama-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy and configure the Agama project
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-cert-authn-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install the cert-authn plugin
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-casa-acr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Update the Casa ACR
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enrollment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-onboarding-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Account onboarding (optional)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-plugin-compatible-with-smart-cards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Is the plugin compatible with smart cards?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customize-the-browser-dialog-for-not-remembering-the-user-choice" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to customize the browser dialog for not remembering the user choice?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#does-the-plugin-support-revocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Does the plugin support revocation?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-plugin-be-used-on-older-versions-of-jans" class="md-nav__link">
    <span class="md-ellipsis">
      
        Can the plugin be used on older versions of Jans?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#are-certificates-required-to-have-the-client-authentication-purpose-in-the-extended-key-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Are certificates required to have the Client Authentication purpose in the extended key usage?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-the-roundtripmaxtime-property-in-the-agama-project-used-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's the roundTripMaxTime property in the Agama project used for?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-account-onboarding-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        How does account onboarding work?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-there-a-way-to-offer-certificate-enrollmentauthentication-without-having-casa-installed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Is there a way to offer certificate enrollment/authentication without having Casa installed?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cert-authn-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Smart Card Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../developer/overview/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/session-management/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Sessions
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/config-guide/smtp-configuration/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Additional Settings
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/test-debug/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Test & Debug
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Deploy & Operate
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../CHANGELOG/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Product & Releases
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-testing-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate testing certificates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Generate testing certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-client-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import client certificates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-a-cert-pickup-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup a cert pickup URL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup a cert pickup URL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-and-configure-the-agama-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy and configure the Agama project
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-cert-authn-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install the cert-authn plugin
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-casa-acr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Update the Casa ACR
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enrollment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account-onboarding-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Account onboarding (optional)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-the-plugin-compatible-with-smart-cards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Is the plugin compatible with smart cards?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customize-the-browser-dialog-for-not-remembering-the-user-choice" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to customize the browser dialog for not remembering the user choice?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#does-the-plugin-support-revocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Does the plugin support revocation?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-the-plugin-be-used-on-older-versions-of-jans" class="md-nav__link">
    <span class="md-ellipsis">
      
        Can the plugin be used on older versions of Jans?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#are-certificates-required-to-have-the-client-authentication-purpose-in-the-extended-key-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Are certificates required to have the Client Authentication purpose in the extended key usage?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-the-roundtripmaxtime-property-in-the-agama-project-used-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's the roundTripMaxTime property in the Agama project used for?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-account-onboarding-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        How does account onboarding work?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-there-a-way-to-offer-certificate-enrollmentauthentication-without-having-casa-installed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Is there a way to offer certificate enrollment/authentication without having Casa installed?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../../janssen-server/config-guide/" class="md-path__link">
          
  <span class="md-ellipsis">
    Configure Identity & Policies
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../" class="md-path__link">
          
  <span class="md-ellipsis">
    Casa (Self-Service Portal)
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../2fa-settings/" class="md-path__link">
          
  <span class="md-ellipsis">
    Plugins
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    Certificate Authentication
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
  
                  

  <nav class="md-tags" >
    
      
      
      
      
        <span class="md-tag">2FA</span>
      
    
      
      
      
      
        <span class="md-tag">Casa</span>
      
    
      
      
      
      
        <span class="md-tag">Certificate</span>
      
    
      
      
      
      
        <span class="md-tag">Smartcards</span>
      
    
  </nav>


  
  


<h1 id="client-certificate-authentication">Client certificate authentication<a class="headerlink" href="#client-certificate-authentication" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>At a high level, certificate authentication is a method of verifying identity using digital certificates. Here, the client (user or device) provides a certificate to the server to prove its identity. A certificate contains information like a digital signature, expiration date, name of client (a.k.a subject), certificate authority (CA) name, serial number, and more, all structured using the X.509 standard. Actual authentication occurs in the SSL/TLS handshake, an important process that takes place before any relevant data is transmitted in an SSL/TLS session.</p>
<p>The Casa client certificate authentication plugin offers:</p>
<ul>
<li>Enrollment of digital certificates (may include automatic user registration)</li>
<li>Authentication by presenting a valid certificate (no username or password required)</li>
<li>Use enrolled certificates as a form of second-factor authentication</li>
</ul>
<h3 id="requisites">Requisites<a class="headerlink" href="#requisites" title="Permanent link">#</a></h3>
<ul>
<li>A Janssen server with Apache or nginx HTTP front</li>
<li>Jans Casa 1.16.0 or higher. Need it in an <a href="#can-the-plugin-be-used-on-older-versions-of-jans">older</a> version?</li>
<li>It is assumed your organization already has an established mechanism of certificate issuance and deployment. For the purpose of testing, this documentation provides manual steps for issuing certificates</li>
</ul>
<h3 id="configuration-steps">Configuration steps<a class="headerlink" href="#configuration-steps" title="Permanent link">#</a></h3>
<p>The below are the steps required to setup client certificate authentication with Casa in Jans:</p>
<ul>
<li>Generate client certificates and an associated certificate chain for testing. This may be skipped if you already own certificates</li>
<li>Import client certificates in the user's browser</li>
<li>Setup a cert pickup URL in your front HTTP server</li>
<li>Deploy and configure the cert-authn Agama project in the server</li>
<li>Install the cert-authn Casa plugin</li>
<li>Update the Casa ACR</li>
</ul>
<h2 id="generate-testing-certificates">Generate testing certificates<a class="headerlink" href="#generate-testing-certificates" title="Permanent link">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section assumes the usage of a *nix machine. Translate commands to your OS accordingly</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Downloads listed here will take up no more than 32MB of bandwidth</p>
</div>
<p>For this task, two approaches are covered here. You can choose any or even both for a more extensive testing:</p>
<ul>
<li>
<p>Reusing already made testing certificates. These are PKI testing certificates published by the Computer Research Security Center of <a href="https://www.nist.gov/itl">NIST ITL</a></p>
</li>
<li>
<p>Creating a tiny CA through free, open-source tools provided by <a href="https://smallstep.com/">Smallstep Labs</a>. This approach is easy too - just need to run a few commands</p>
</li>
</ul>
<p>The steps given are supposed to be executed in a developer or administrative machine, not your Janssen server.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">NIST PKI test certs</label><label for="__tabbed_1_2">Generating certs with Smallstep</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Visit the PKI testing <a href="https://csrc.nist.gov/projects/pki-testing">site</a> and download the test descriptions and test data of the Path Validation Testing Program. Extract the contents and in a new, separate directory, copy the following:</p>
<p>Signing certificates:</p>
<ul>
<li>GoodCACert.crt</li>
<li>TrustAnchorRootCertificate.crt</li>
</ul>
<p>End-entity certificates:</p>
<ul>
<li>ValidCertificatePathTest1EE.p12</li>
<li>InvalidEESignatureTest3EE.p12</li>
<li>ValidGeneralizedTimenotAfterDateTest8EE.p12</li>
</ul>
<p>There are many end-entity certificates and they map to the tests described in the PDF file downloaded earlier. These three were just picked to exemplify configuration and testing of client certificate authentication in Jans.</p>
<p><code>crt</code> files are in DER (binary) format and they constitute the so called "certificate chain" or "certificate path". Here is how to generate the chain in PEM format:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-----BEGIN CERTIFICATE-----&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>chain.pem
base64<span class="w"> </span>TrustAnchorRootCertificate.crt<span class="w"> </span>&gt;&gt;<span class="w"> </span>chain.pem
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-----END CERTIFICATE-----&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>chain.pem

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-----BEGIN CERTIFICATE-----&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>chain.pem
base64<span class="w"> </span>GoodCACert.crt<span class="w"> </span>&gt;&gt;<span class="w"> </span>chain.pem
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-----END CERTIFICATE-----&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>chain.pem
</code></pre></div>
<p>In summary, the result is a file containing Base64-encoded certs of the root CA followed by the intermediate CA employed to sign the end-entity (user) certificates.</p>
</div>
<div class="tabbed-block">
<ol>
<li>
<p>Download and install <code>step-ca</code> (a private online CA). Go to <code>https://github.com/smallstep/certificates/releases/latest</code> and pick the artifact that best matches your OS/platform</p>
</li>
<li>
<p>Downlod and install <code>step-cli</code> (<code>step-ca</code> client). Go to <code>https://github.com/smallstep/cli/releases/latest</code> and pick the artifact that best matches your OS/platform</p>
</li>
<li>
<p>Create a file containing the password to encrypt the CA keys, for instance <code>echo 'Admin1.' &gt; capwd</code></p>
</li>
<li>
<p>Initialize a PKI without CA configuration: <code>step ca init --pki --name foobar --deployment-type standalone --password-file capwd</code>. After completion some feedback will be shown including the location of the root certificate and intermediate certificate. Keep those paths at hand</p>
</li>
<li>
<p>Build the certificate chain file: <code>cat .step/certs/root_ca.crt .step/certs/intermediate_ca.crt &gt; chain.pem</code></p>
</li>
<li>
<p>Create a private key and a certificate for <code>cn=Joe</code> (subject of the cert): <code>step certificate create Joe joe.crt joe.key --ca ~/.step/certs/intermediate_ca.crt --ca-key ~/.step/secrets/intermediate_ca_key --ca-password-file capwd --not-after=720h</code>. This command will create a certificate signed with the intermediate certificate</p>
</li>
<li>
<p>Inspect the created cert: <code>step certificate inspect joe.crt</code>. Note the expiration is of 30 days and that "Client authentication" is explicitly part of the extended key usages</p>
</li>
<li>
<p>Package Joe's certificate and key into a <code>p12</code> file: <code>step certificate p12 joe.p12 joe.crt joe.key</code>. You will be prompted two passwords: one for the <code>p12</code> file itself, and the password previously used to encrypt the private key of the user certificate</p>
</li>
</ol>
</div>
</div>
</div>
<h3 id="import-client-certificates">Import client certificates<a class="headerlink" href="#import-client-certificates" title="Permanent link">#</a></h3>
<p>Instructions for this vary among browsers. Often, it boils down to locating a "certificates" section in the settings menu and import the <code>p12</code> file under "Your certificates". A prompt will appear: enter the password used when the <code>p12</code> file was generated.</p>
<p>If using the NIST PKI test certs, type <strong>password</strong>. Import all the <code>p12</code> files copied.</p>
<h2 id="setup-a-cert-pickup-url">Setup a cert pickup URL<a class="headerlink" href="#setup-a-cert-pickup-url" title="Permanent link">#</a></h2>
<p>For certificate authentication, the HTTP sever must configured so the <code>CertificateRequest</code> message is sent in the TLS handshake. This will make the client (web browser in this case) show a dialog for the user to pick one certificate from those already imported into the browser's certificate manager.</p>
<p><img alt="browser-dialog" src="../../../assets/casa/plugins/cert-authn-browser_dialog.png" /></p>
<p>The instructions to setup this URL vary depending on the TLS version required and type of HTTP server. Here we provide guidance for Apache 2.4 with TLS 1.2 and 1.3. You can translate the Apache configuration directives directly to nginx. If you face issues or use a different server, please open a <a href="https://github.com/JanssenProject/jans/discussions">discussion</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The last available version of TLS is 1.3 and is highly recommended to use it.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Apache 2.4 with TLS 1.3</label><label for="__tabbed_2_2">Apache 2.4 with TLS 1.2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>This configuration requires creating a subdomain or opening a new port for serving HTTPs. There will be only one URL served in this case, e.g. <code>https://acme.co:444/</code>; all other content will respond with HTTP 404 (not found). Hitting this URL will bring up the native web browser dialog for selecting a user certificate.  </p>
<p>The easiest way to set this up is adding a <code>VirtualHost</code> directive associated to a new port, for instance 444. This <a href="https://github.com/JanssenProject/jans/raw/nightly/jans-casa/plugins/cert-authn/apache/certauthn_vhost_tls1.3.conf">snippet</a> exemplifies a safe way to do so. Note you have to edit accordingly:</p>
<ul>
<li>The server name</li>
<li>The paths to the SSL certificate. This is the web serving certificate and is unrelated to the certificates used for authentication</li>
</ul>
<p>Transfer the edited file to <code>/etc/apache2/sites-enabled</code>. Note there is already a file named <code>https_jans.conf</code> with a <code>VirtualHost</code> for port 443 that you can use as a guide. Finally, add a <code>Listen 444</code> directive to file <code>/etc/apache2/ports.conf</code>.</p>
</div>
<div class="tabbed-block">
<p>This is the fastest approach and involves adding a directive inside the existing <code>VirtualHost</code> for port 443 in  <code>/etc/apache2/sites-enabled/https_jans.conf</code>. Copy this <a href="https://github.com/JanssenProject/jans/raw/nightly/jans-casa/plugins/cert-authn/apache/locationmatch_tls1.2.conf">snippet</a> and paste it just after the closing of the <code>Location</code> directive associated to <code>/jans-casa</code>.</p>
<p>In this case your cert pickup URL is <code>https://&lt;your-host-name&gt;/jans-casa/pl/cert-authn/index.zul</code>.</p>
</div>
</div>
</div>
<h3 id="test">Test<a class="headerlink" href="#test" title="Permanent link">#</a></h3>
<p>Restart Apache (e.g. <code>systemctl restart apache2</code>) and in a browser visit the URL configured, e.g. <code>https://acme.co:444</code> (TLS 1.3) or <code>https://acme.co/jans-casa/pl/cert-authn/index.zul</code> (TLS 1.2). This will display a dialog like <a href="../../../assets/casa/plugins/cert-authn-browser_dialog.png">this</a> listing the certificates imported so far. Do not select anything and close the browser window.</p>
<h2 id="deploy-and-configure-the-agama-project">Deploy and configure the Agama project<a class="headerlink" href="#deploy-and-configure-the-agama-project" title="Permanent link">#</a></h2>
<p>The <code>cert-authn</code> Agama project is a utility project that allows administrators do things like:</p>
<ul>
<li>
<p>Display a login page where users are shown the option to present a certificate</p>
<ul>
<li>
<p>If the certificate is not mapped to an existing account, a new identity is created with the attributes found in the cert (automatic user registration). Then access to the application is granted</p>
</li>
<li>
<p>If the certificate is mapped to an existing account, access to the application is granted to such user</p>
</li>
</ul>
</li>
<li>
<p>Display a login page as the above including the configured identity providers, if any, in case the <a href="../accts-linking/account-linking-index/">accounts linking</a> plugin is installed  </p>
</li>
<li>
<p>Offer users the ability to enroll a certificate when they are already logged into Casa</p>
</li>
<li>
<p>Usage of certificates as a form of second-factor authentication</p>
</li>
</ul>
<p>Offering users the login page and the account onboarding regarded above is up to administrators (optional feature).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instructions provided here assume usage of TUI. Do the equivalent in admin-ui or other configuration mechanism</p>
</div>
<ol>
<li>
<p>Download the certificate authentication Agama project archive: <code>https://maven.jans.io/maven/io/jans/casa/plugins/cert-authn-agama/0.0.0-nightly/cert-authn-agama-0.0.0-nightly-project.zip</code></p>
</li>
<li>
<p>Transfer the zip file to a location in the server and deploy it. For example, if using TUI, go to Agama menu -&gt; "Upload project". Wait one minute</p>
</li>
<li>
<p>Scroll through the list of projects until <code>cert-authn</code> is highlighted</p>
</li>
<li>
<p>Open the configuration management dialog (press <code>c</code>) and choose to export the sample configuration to a file on disk</p>
</li>
<li>
<p>Edit property <code>certPickupUrl</code> of flow <code>io.jans.casa.cert.promptAndValidate</code> accordingly. This is the URL that displays the browser dialog for choosing a certificate</p>
</li>
<li>
<p>If you did not <a href="#generate-testing-certificates">generate testing certificates</a>, i.e. already own some certs, create a file named <code>chain.pem</code> by concatenating the contents in PEM format of the certificate chain starting with the root CA cert, and appending the rest of intermediate certificates. The last certificate would be the one employed to sign the end-entity (user certificate). Ensure the BEGIN/END CERTIFICATE marker lines are included</p>
</li>
<li>
<p>Compute a one-liner JSON string for the contents of <code>certChainPEM</code> property, for example: <code>sed -i.bak ':a;N;$!ba;s/\n/\\n/g' chain.pem</code></p>
</li>
<li>
<p>Optional. If integration with accounts linking plugin is desired, set <code>useAcctLinking</code> to <code>true</code> for flow <code>io.jans.casa.cert.oneStepAuthn</code></p>
</li>
<li>
<p>Optional. Reference an attribute mapping for account onboarding in property <code>mappingClassField</code> of flow <code>io.jans.casa.cert.standaloneOneStepAuthn</code>. More details <a href="#how-does-account-onboarding-work">here</a></p>
</li>
<li>
<p>Save the JSON file and open again the configuration management dialog for the cert-authn Agama project. Import the resulting file</p>
</li>
</ol>
<p>The next <strong>optional</strong> step is assigning an icon to certificate authentication for the Casa selector page:</p>
<ol>
<li>
<p>Scroll through the list of projects until the <code>casa</code> project is highlighted</p>
</li>
<li>
<p>Open the project details (press <code>v</code>) and export the current configuration to a file on disk</p>
</li>
<li>
<p>Edit the file: in the <code>selector</code> section under <code>io.jans.casa.authn.main</code>, add:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;io.jans.casa.authn.cert&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;span class=&#39;fa-layers fa-fw f2 mr1 nl2&#39;&gt;&lt;i class=&#39;far fa-circle&#39; data-fa-transform=&#39;shrink-4 up-3 right-4&#39;&gt;&lt;/i&gt;&lt;i class=&#39;far fa-circle&#39; data-fa-transform=&#39;shrink-5 up-3 right-4&#39;&gt;&lt;/i&gt;&lt;i class=&#39;far fa-circle&#39; data-fa-transform=&#39;shrink-6 up-3 right-4&#39;&gt;&lt;/i&gt;&lt;i class=&#39;fas fa-bookmark&#39; data-fa-transform=&#39;rotate-30 shrink-9 down-4&#39;&gt;&lt;/i&gt;&lt;i class=&#39;fas fa-bookmark&#39; data-fa-transform=&#39;rotate--30 shrink-9 down-4 right-8&#39;&gt;&lt;/i&gt;&lt;/span&gt;&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;textKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casa.selector.certauthn&quot;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Save the file, and import it back as the configuration for project <code>casa</code></p>
</li>
</ol>
<h2 id="install-the-cert-authn-plugin">Install the cert-authn plugin<a class="headerlink" href="#install-the-cert-authn-plugin" title="Permanent link">#</a></h2>
<ol>
<li>
<p>Download the plugin jar file <code>https://maven.jans.io/maven/io/jans/casa/plugins/cert-authn/0.0.0-nightly/cert-authn-0.0.0-nightly-jar-with-dependencies.jar</code> and copy to your server's <code>/opt/jans/jetty/jans-casa/plugins</code>. Alternatively upload the file using Casa itself: go to <code>Administration console</code> &gt; <code>Casa plugins</code></p>
</li>
<li>
<p>Wait one minute. In the admin console, navigate to the "Authentication methods" page. A new "User certificates" widget will appear. Enable the authentication method, drag it to the location (priority) desired, and hit "Save"</p>
</li>
<li>
<p>Navigate to Casa main dashboard. A new menu item will appear for the certificate enrollment</p>
</li>
</ol>
<h2 id="update-the-casa-acr">Update the Casa ACR<a class="headerlink" href="#update-the-casa-acr" title="Permanent link">#</a></h2>
<p>This step is required only if account onboarding via certificate attributes is desired or if you want to authenticate users by presenting a certificate alone (no username).</p>
<p>Note these instructions apply for VM-based installations. On containers-based environments, please open a GitHub discussion or a support ticket.</p>
<ol>
<li>
<p>Download file <code>https://maven.jans.io/maven/io/jans/jans-scim-model/0.0.0-nightly/jans-scim-model-0.0.0-nightly.jar</code> and place it in your server under <code>/opt/jans/jetty/jans-auth/custom/libs</code></p>
</li>
<li>
<p>Edit the file <code>/etc/default/jans-casa</code>: locate a segment that reads <code>-Dacr=</code> and assign <code>agama_io.jans.casa.cert.oneStepAuthn</code> as new value. Save the change</p>
</li>
<li>
<p>Restart <code>jans-casa</code> and <code>jans-auth</code> services</p>
</li>
</ol>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The dialog for users to pick a certificate from the already imported certificates do not behave the same for all browsers. In some cases, a browser will "cache" the selection and remember the choice for the whole browsing session or even for several days. Sometimes, the user can choose for how long the selection is remembered. You can always clear the SSL cache to make the prompt appear again. Instructions to do so vary.</p>
</div>
<h3 id="enrollment">Enrollment<a class="headerlink" href="#enrollment" title="Permanent link">#</a></h3>
<p>Use one or more testing users in Jans. Assign (enroll) testing certificates as desired. Here's how to do it for a single account:</p>
<ol>
<li>
<p>Ensure you have <a href="#import-client-certificates">imported</a> the user certificates in <code>p12</code> format into the certificate manager of the given browser</p>
</li>
<li>
<p>Login as the user and click on "Manage certificates" on the main dashboard</p>
</li>
<li>
<p>Read the hints given for an effective enrollment. Click on the "Proceed" button</p>
</li>
<li>
<p>The browser will be redirected to the configured cert pickup URL and a native dialog will appear. From here, choose one of the available certificates</p>
</li>
<li>
<p>A message will appear acknowledging the certificate was successfully linked to the account. Click on "Return"</p>
</li>
<li>
<p>The browser will be taken to the listing of currently enrolled certificates. A new entry will appear associated to the certificate previously chosen</p>
</li>
</ol>
<p>Testing can be extended to the following scenarios:</p>
<ul>
<li>Enroll an additional certificate</li>
<li>Attempt to enroll an already enrolled certificate</li>
<li>Attempt to enroll an expired certificate</li>
<li>Attempt to enroll an invalid certificate if you have one at hand (as in the NIST PKI certs), or a certificate issued with a certificate chain that is different from the chain currently configured for the <code>cert-authn</code> Agama project</li>
</ul>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">#</a></h3>
<p>Once testing users have certificates enrolled, add other credentials like OTP so second-factor authentication can be turned on for them.</p>
<p>Here are steps for testing authentication for a given user (happy path):</p>
<ol>
<li>
<p>If there is a Casa session open, log out and try to login again</p>
</li>
<li>
<p>Supply username and password</p>
</li>
<li>
<p>On the selection page click on "user certificates". If this option does not appear, ensure you have properly followed <a href="#install-the-cert-authn-plugin">these</a> steps</p>
</li>
<li>
<p>The browser will be redirected to the configured cert pickup URL. If no dialog appears, the browser is reusing a previous selection. Close the window and start again, or flush the SSL cache</p>
</li>
<li>
<p>Select one of the already enrolled certificates. Authentication should succeed</p>
</li>
</ol>
<p>Testing can be extended to the following scenarios where authentication should fail:</p>
<ul>
<li>Selecting a certificate imported in the browser but not enrolled in Casa</li>
<li>Selecting a certificate a different user has enrolled</li>
<li>Selecting a certificate that was enrolled but has expired</li>
<li>Not selecting any certificate: hitting "Cancel" or "Don't send a certificate" option in the browser dialog</li>
</ul>
<h3 id="account-onboarding-optional">Account onboarding (optional)<a class="headerlink" href="#account-onboarding-optional" title="Permanent link">#</a></h3>
<p>Having followed <a href="#update-the-casa-acr">these</a> steps, visit the Casa login page.</p>
<ol>
<li>
<p>Click on the "Smart card | User certificate" option</p>
</li>
<li>
<p>The browser will be redirected to the configured cert pickup URL and a native dialog will appear. From here, choose one of the available certificates</p>
</li>
<li>
<p>You will be authenticated as the user who previously enrolled that cert, otherwise a new account has been created for the user. Check the user profile data (TUI or admin-ui) and see how attributes have been populated for the account</p>
</li>
</ol>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">#</a></h2>
<h3 id="is-the-plugin-compatible-with-smart-cards">Is the plugin compatible with smart cards?<a class="headerlink" href="#is-the-plugin-compatible-with-smart-cards" title="Permanent link">#</a></h3>
<p>Yes. There is a simple demonstrative <a href="../cert-authn-tutorial/">tutorial</a> available.</p>
<h3 id="how-to-customize-the-browser-dialog-for-not-remembering-the-user-choice">How to customize the browser dialog for not remembering the user choice?<a class="headerlink" href="#how-to-customize-the-browser-dialog-for-not-remembering-the-user-choice" title="Permanent link">#</a></h3>
<p>This is not possible - at least from Janssen server.</p>
<h3 id="does-the-plugin-support-revocation">Does the plugin support revocation?<a class="headerlink" href="#does-the-plugin-support-revocation" title="Permanent link">#</a></h3>
<p>It's not implemented but we may add CRL functionality on request. OCSP is another option but it seems to be a <a href="https://www.feistyduck.com/newsletter/issue_121_the_slow_death_of_ocsp">discouraged</a> practice these days.</p>
<p>Another practice to consider for your PKI is using passive revocation and short-lived certificates. Here, a certificate that has been revoked can no longer be renewed at the CA. It will still be valid for the remainder of its validity period, but cannot be prolonged.</p>
<h3 id="can-the-plugin-be-used-on-older-versions-of-jans">Can the plugin be used on older versions of Jans?<a class="headerlink" href="#can-the-plugin-be-used-on-older-versions-of-jans" title="Permanent link">#</a></h3>
<p>The plugin can be run in versions 1.1.5 to 1.15.0 with a subtle update in the application descriptor. Run the following in your VM-based installation:</p>
<ul>
<li>
<p><code>cd</code> to <code>/opt/jans/jetty/jans-casa/webapps</code></p>
</li>
<li>
<p>Run <code>jar -xf jans-casa.war WEB-INF/web.xml</code></p>
</li>
<li>
<p>Edit <code>web.xml</code> by inserting the following inside the <code>web-app</code> tag:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;session-config&gt;</span>
<span class="w">    </span><span class="nt">&lt;tracking-mode&gt;</span>COOKIE<span class="nt">&lt;/tracking-mode&gt;</span>
<span class="nt">&lt;/session-config&gt;</span>
</code></pre></div>
</li>
<li>
<p>Save the file and update the war file: <code>jar -uf jans-casa.war WEB-INF/web.xml</code></p>
</li>
<li>
<p>Run <code>rm -rf WEB-INF</code></p>
</li>
<li>
<p>Restart casa</p>
</li>
</ul>
<h3 id="are-certificates-required-to-have-the-client-authentication-purpose-in-the-extended-key-usage">Are certificates required to have the Client Authentication purpose in the extended key usage?<a class="headerlink" href="#are-certificates-required-to-have-the-client-authentication-purpose-in-the-extended-key-usage" title="Permanent link">#</a></h3>
<p>No. Section <a href="https://datatracker.ietf.org/doc/html/rfc5280.html#section-4.2.1.12">4.2.1.12</a> of RFC 5280 mentions:</p>
<blockquote>
<p>Certificate using applications MAY require that the extended key usage extension be present and that a particular purpose be indicated in order for the certificate to be acceptable to that application.</p>
</blockquote>
<p>We chose not to require the presence of the purpose.</p>
<h3 id="whats-the-roundtripmaxtime-property-in-the-agama-project-used-for">What's the <code>roundTripMaxTime</code> property in the Agama project used for?<a class="headerlink" href="#whats-the-roundtripmaxtime-property-in-the-agama-project-used-for" title="Permanent link">#</a></h3>
<p>The implementation requires defining a maximum time for the completion of the task consisting of initiating enrollment (or authentication), selecting a certificate, entering a PIN (in the case of smart cards), and returning to the page that originated the task. A default value of 45 seconds is used.</p>
<p>If the process is not completed in this timeframe, it will fail and the log will report errors regarding expired cache entries. In this case, consider using a higher value for <code>roundTripMaxTime</code>.</p>
<h3 id="how-does-account-onboarding-work">How does account onboarding work?<a class="headerlink" href="#how-does-account-onboarding-work" title="Permanent link">#</a></h3>
<p>Registering an account based on the information found in a certificate is done via attribute mappings:
Config property <code>mappingClassField</code> of flow <code>io.jans.casa.cert.standaloneOneStepAuthn</code> points to a Java method found in class <code>io.jans.casa.certauthn.AttributeMappings</code> of the cert-authn Agama project. Such method takes a <code>Map&lt;String, String&gt;</code> as input and returns a <code>Map&lt;String, String&gt;</code> as well.</p>
<p>The input data contains the key/value pairs found in the subject of the certificate. As an example, if the cert was issued to <code>CN=Joe, O=foobar</code>, then the map will look like:</p>
<table>
<thead>
<tr>
<th>Attribute Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cn</code></td>
<td>Joe</td>
</tr>
<tr>
<td><code>o</code></td>
<td>foobar</td>
</tr>
</tbody>
</table>
<p>Note attribute names are lowercased. Additionally, if there is a Subject Alternative Name (SAN) consisting of an e-mail, the input map will contain such value under attribute name <code>mail</code>.</p>
<p>The "input" map can then be used to generate the resulting profile of the user to onboard. For example, by default the project employs a method called <code>STRAIGHT</code>, which returns a copy of the incoming map restricted to the attributes <code>o</code>, <code>cn</code>, <code>l</code>, and <code>mail</code>. Also the <code>uid</code> attribute is added with the same value of <code>mail</code>. This mapping is useful in general but administrators might like to supply their own mapping.</p>
<p>To provide your own mapping, edit the cert-authn project: in file <code>lib/io/jans/casa/certauthn/AttributeMappings.java</code> add a new field based on the current (<code>STRAIGHT</code>) mapping. Then point to the new mapping in the project configuration accordingly. Ensure to always set an <code>uid</code>.</p>
<p>Note attribute mapping only takes place when creating an account, that is, if the certificate in question is associated to an existing user, no profile update occurs.</p>
<h3 id="is-there-a-way-to-offer-certificate-enrollmentauthentication-without-having-casa-installed">Is there a way to offer certificate enrollment/authentication without having Casa installed?<a class="headerlink" href="#is-there-a-way-to-offer-certificate-enrollmentauthentication-without-having-casa-installed" title="Permanent link">#</a></h3>
<p>Yes, that's possible. Open a GitHub discussion or a support ticket.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="February 16, 2026 12:29:22 UTC"><span class="timeago" datetime="2026-02-16T12:29:22+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="February 16, 2026 12:29:22 UTC">2026-02-16</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 31, 2025 13:08:51 UTC"><span class="timeago" datetime="2025-12-31T13:08:51+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 31, 2025 13:08:51 UTC">2025-12-31</span>
  </span>

    
    
    
  </aside>





                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026, The Janssen Project
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/JanssenProject/jans" target="_blank" rel="noopener" title="Janssen on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://jans.io/docs" target="_blank" rel="noopener" title="Janssen Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2C505.9 32 576 102 576 188.5c0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1C429.8 399.5 390 416 348.5 416 262.1 416 192 346 192 259.5c0-1.5 0-3 .1-4.5.5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9v2.6c0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zm-144.3 77.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1l-71.1 71.1C73.8 275.5 64 299.1 64 323.6c0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2C70.1 480.2 0 410.2 0 323.7c0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9v3.9c-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8v-2.3c0-33.7-18-63.3-44.8-79.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.prune", "navigation.path", "navigation.top", "navigation.instant", "navigation.instant.progress", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    

      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../javascripts/skeleton-loader.js"></script>
      
        <script src="../../../javascripts/full-screen-sections.js"></script>
      
    



  </body>
</html>