

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Janssen Project Deployment and Operation References">
      
      
        <meta name="author" content="Janssen, Inc.">
      
      
        <link rel="canonical" href="https://docs.jans.io/nightly/script-catalog/person_authentication/person-authentication/">
      
      
        <link rel="prev" href="../../persistence_extension/persistence/">
      
      
        <link rel="next" href="../../post_authn/post-authentication/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/janssen_project_favicon_transparent_50px_50px.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Person Authentication - Janssen Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../css/tabs.css">
    
      <link rel="stylesheet" href="../../../stylesheets/mermaid-extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/home.css">
    
      <link rel="stylesheet" href="../../../stylesheets/navigation.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#person-authentication-scripts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Janssen Documentation" class="md-header__button md-logo" aria-label="Janssen Documentation" data-md-component="logo">
      
  <img src="../../../assets/janssen_project.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Janssen Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Person Authentication
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/JanssenProject/jans/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/architecture/" class="md-tabs__link">
          
  
  
    
  
  Architecture & Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/auth-server/" class="md-tabs__link">
          
  
  
    
  
  Integrate & Authenticate

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../janssen-server/config-guide/" class="md-tabs__link">
          
  
  
    
  
  Configure Identity & Policies

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/test-debug/" class="md-tabs__link">
          
  
  
    
  
  Test & Debug

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../janssen-server/" class="md-tabs__link">
          
  
  
    
  
  Deploy & Operate

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../CHANGELOG/" class="md-tabs__link">
          
  
  
    
  
  Product & Releases

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Janssen Documentation" class="md-nav__button md-logo" aria-label="Janssen Documentation" data-md-component="logo">
      
  <img src="../../../assets/janssen_project.svg" alt="logo">

    </a>
    Janssen Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JanssenProject/jans/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../.." class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/architecture/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Architecture & Concepts
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Integrate & Authenticate
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../janssen-server/config-guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Configure Identity & Policies
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configure Identity & Policies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../janssen-server/config-guide/config-tools/jans-tui/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Configuration Tools
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/client-management/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Clients & Applications
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/scopes/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Scopes & Claims
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/usermgmt/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    User Management
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/scim/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    SCIM
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Custom Scripts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Custom Scripts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../janssen-server/config-guide/custom-scripts-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../janssen-server/developer/scripts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Interception Scripts
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7_2" id="__nav_4_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interception Scripts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../application_session/application-session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Session
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authorization_challenge/authorization-challenge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authorization Challenge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authz_detail/authz-detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authorization Detail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ciba/ciba/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CIBA End User Notification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../client_registration/client-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../client_authn/client-authn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config_api/config-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp/idp-extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../consent_gathering/consent-gathering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consent Gathering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dynamic_scope/dynamic-scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic Scope
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../end_session/end-session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    End Session
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../id_generator/id-generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ID Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introspection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../discovery/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenID Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../persistence_extension/persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Person Authentication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Person Authentication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-blocks-of-an-authentication-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building blocks of an authentication workflow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building blocks of an authentication workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Custom script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-ui-pages" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. UI pages:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. UI pages:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-server-side-actions-implemented-by-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        a. Server-side actions implemented by custom script:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-web-page-in-xhtml" class="md-nav__link">
    <span class="md-ellipsis">
      
        b. Web page in xhtml:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-page-customizations" class="md-nav__link">
    <span class="md-ellipsis">
      
        c. Page customizations:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-business-logic-in-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        C. Business logic in Custom script:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-third-party-libraries-for-use-in-the-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        D. Third-party libraries for use in the custom script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-configuring-the-acr-parameter-in-the-jans-auth-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        E. Configuring the acr parameter in the Jans-auth server:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E. Configuring the acr parameter in the Jans-auth server:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-authentication-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Default authentication method:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-acr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal ACR
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication-method-for-a-client-rp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication method for a client (RP):
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-authentication-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Authentication Mechanisms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-an-authentication-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enabling an authentication mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#level-rank-of-an-authentication-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Level (rank) of an Authentication mechanism :
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-using-person-authenticator-jansauthenticator-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      
        F. Using person authenticator jansAuthenticator attribute :
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="F. Using person authenticator jansAuthenticator attribute :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-format-of-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Format of attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-sample-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Sample data:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-access-jansauthenticator-and-jansextuid-from-generic-bean" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Access jansAuthenticator and jansExtUid from generic bean
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage scenarios
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-implementing-2fa-authentication-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Implementing 2FA authentication mechanisms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-implementing-multistep-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Implementing Multistep authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-implementing-social-logins" class="md-nav__link">
    <span class="md-ellipsis">
      
        C. Implementing Social logins
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-proactively-perform-fraud-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        D. Proactively perform fraud detection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-an-authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing an authentication flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faqs" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-how-can-error-messages-be-displayed-on-a-web-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. How can error messages be displayed on a web page?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-how-is-redirection-to-a-third-party-application-for-authentication-handled-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. How is redirection to a third party application for authentication handled in a script?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-why-is-the-browser-taken-to-the-redirect-uri-even-if-the-authentication-was-not-successful" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Why is the browser taken to the redirect URI even if the authentication was not successful?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../post_authn/post-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Post Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource_owner_password_credentials/ropc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ROPC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../revoke_token/revoke-token/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Revoke Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scim/scim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SCIM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../token_exchange/token-exchange/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Token Exchange
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access_evaluation/access-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access_evaluation/access-evaluation-discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Access Evaluation Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../logout_status_jwt/logout-status-jwt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Logout Status JWT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../par/par/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PAR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tx_token/txtoken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transaction Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookie/cookie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../discovery/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../select_account/select-account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Select Account
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../spontaneous_scope/spontaneous-scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spontaneous Scope
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fido2_extension/fido2-extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fido2 Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create_user/create-user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create User
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../health_check/health-check/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Health Check
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uma_rpt_claims/uma-claims-jwt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UMA Claims (JWT)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uma_claims_gathering/uma-claims-web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UMA Claims Gathering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uma_rpt_policy/uma-rpt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UMA RPT Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../update_token/update-token/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Update Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../link_interception/link-interception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Link Interception
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ssa/ssa-modify-response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSA Modify Response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/config/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Auth Server Settings
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../casa/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Casa (Self-Service Portal)
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/auth-server/session-management/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Sessions
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/config-guide/smtp-configuration/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Additional Settings
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/test-debug/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Test & Debug
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../janssen-server/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Deploy & Operate
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../CHANGELOG/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Product & Releases
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-blocks-of-an-authentication-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building blocks of an authentication workflow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building blocks of an authentication workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Custom script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-ui-pages" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. UI pages:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. UI pages:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-server-side-actions-implemented-by-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        a. Server-side actions implemented by custom script:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-web-page-in-xhtml" class="md-nav__link">
    <span class="md-ellipsis">
      
        b. Web page in xhtml:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-page-customizations" class="md-nav__link">
    <span class="md-ellipsis">
      
        c. Page customizations:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-business-logic-in-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        C. Business logic in Custom script:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-third-party-libraries-for-use-in-the-custom-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        D. Third-party libraries for use in the custom script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-configuring-the-acr-parameter-in-the-jans-auth-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        E. Configuring the acr parameter in the Jans-auth server:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E. Configuring the acr parameter in the Jans-auth server:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-authentication-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Default authentication method:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-acr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Internal ACR
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication-method-for-a-client-rp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication method for a client (RP):
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-authentication-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Authentication Mechanisms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-an-authentication-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enabling an authentication mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#level-rank-of-an-authentication-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Level (rank) of an Authentication mechanism :
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-using-person-authenticator-jansauthenticator-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      
        F. Using person authenticator jansAuthenticator attribute :
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="F. Using person authenticator jansAuthenticator attribute :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-format-of-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Format of attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-sample-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Sample data:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-access-jansauthenticator-and-jansextuid-from-generic-bean" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Access jansAuthenticator and jansExtUid from generic bean
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage scenarios
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-implementing-2fa-authentication-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Implementing 2FA authentication mechanisms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-implementing-multistep-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Implementing Multistep authentication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-implementing-social-logins" class="md-nav__link">
    <span class="md-ellipsis">
      
        C. Implementing Social logins
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-proactively-perform-fraud-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        D. Proactively perform fraud detection
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-an-authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing an authentication flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faqs" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-how-can-error-messages-be-displayed-on-a-web-page" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. How can error messages be displayed on a web page?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-how-is-redirection-to-a-third-party-application-for-authentication-handled-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. How is redirection to a third party application for authentication handled in a script?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-why-is-the-browser-taken-to-the-redirect-uri-even-if-the-authentication-was-not-successful" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Why is the browser taken to the redirect URI even if the authentication was not successful?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../../janssen-server/config-guide/" class="md-path__link">
          
  <span class="md-ellipsis">
    Configure Identity & Policies
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../../janssen-server/config-guide/custom-scripts-config/" class="md-path__link">
          
  <span class="md-ellipsis">
    Custom Scripts
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../../janssen-server/developer/scripts/" class="md-path__link">
          
  <span class="md-ellipsis">
    Interception Scripts
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
  
                  

  <nav class="md-tags" >
    
      
      
      
      
        <span class="md-tag">2FA</span>
      
    
      
      
      
      
        <span class="md-tag">PersonAuthenticationType</span>
      
    
      
      
      
      
        <span class="md-tag">acr</span>
      
    
      
      
      
      
        <span class="md-tag">acr_values_supported</span>
      
    
      
      
      
      
        <span class="md-tag">administration</span>
      
    
      
      
      
      
        <span class="md-tag">developer</span>
      
    
      
      
      
      
        <span class="md-tag">script-catalog</span>
      
    
      
      
      
      
        <span class="md-tag">weld</span>
      
    
  </nav>


  
  


<h1 id="person-authentication-scripts">Person Authentication scripts<a class="headerlink" href="#person-authentication-scripts" title="Permanent link">#</a></h1>
<p>The Janssen Server leverages interception scripts of
<a href="https://github.com/JanssenProject/jans/blob/main/jans-core/script/src/main/java/io/jans/model/custom/script/type/auth/PersonAuthenticationType.java">PersonAuthenticationType</a> which when implemented can facilitate complex
multi-step, multi-factor authentication workflows.</p>
<p>The authentication flow in the Janssen Server is driven by the
<a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect specification</a>.
The authorization request to the OP (the Janssen Server) contains an
optional query parameter called <code>acr_values</code> which is used by the OP to pick an
interception script which will be run when <code>/authorize</code> endpoint
(Authentication flow) is invoked.</p>
<p>Each authentication method, whose name is the <code>acr</code> value,
is tied to a <code>PersonAuthenticationType</code> script which offers the authentication
workflow.</p>
<p>Typically, a <code>PersonAuthenticationType</code> script can be used to:</p>
<ul>
<li>Introduce a new 2FA authentication mechanism</li>
<li>Customize multi-step authentication</li>
<li>Offer Social logins</li>
<li>Proactively perform fraud detection and block a fraudulent user</li>
</ul>
<p>Authentication mechanisms offered by Jans can be confirmed by checking the
Janssen Server OP configuration URL:</p>
<div class="highlight"><pre><span></span><code>https://&lt;hostname&gt;/.well-known/openid-configuration
</code></pre></div>
<p>under the claim <code>acr_values_supported</code>.</p>
<h2 id="building-blocks-of-an-authentication-workflow">Building blocks of an authentication workflow<a class="headerlink" href="#building-blocks-of-an-authentication-workflow" title="Permanent link">#</a></h2>
<p>Jans-auth server comprises of a number of beans, configuration files and
Facelets (JSF) views, packaged as a WAR module. That means custom scripts and
custom pages (JSF facelets) can make use of business logic already encapsulated
in the Weld managed beans.</p>
<p>The following sections explain how authentication
flow can be built using a custom script.</p>
<h3 id="a-custom-script">A. Custom script<a class="headerlink" href="#a-custom-script" title="Permanent link">#</a></h3>
<p>The <strong>PersonAuthenticationType</strong> script is described by a java interface
whose methods should be overridden to implement an authentication workflow.
The <a href="../person-authentication-interface/">article</a> talks about these
methods in detail and the pseudo code
for each method.</p>
<h3 id="b-ui-pages">B. UI pages:<a class="headerlink" href="#b-ui-pages" title="Permanent link">#</a></h3>
<p>All web pages are <strong>xhtml</strong> files. The Command-Action offering by JSF
framework is used by the Jans-auth server to implement authentication flows.</p>
<h4 id="a-server-side-actions-implemented-by-custom-script">a. Server-side actions implemented by custom script:<a class="headerlink" href="#a-server-side-actions-implemented-by-custom-script" title="Permanent link">#</a></h4>
<p>The custom script's <code>authenticate</code> and <code>prepareForStep</code> implementations are
called by the following java class - <a href="https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/auth/Authenticator.java">Authenticator</a>. These methods are
mapped as command actions and view actions respectively in the web page.</p>
<p>Relevant methods:</p>
<table>
<thead>
<tr>
<th>Signature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean authenticate()</td>
<td>Makes the authentication flow proceed by calling the <code>authenticate</code> method of the custom script</td>
</tr>
<tr>
<td>String prepareAuthenticationForStep()</td>
<td>Makes the authentication flow proceed by calling the <code>prepareForStep</code> method of the custom script</td>
</tr>
</tbody>
</table>
<h4 id="b-web-page-in-xhtml">b. Web page in xhtml:<a class="headerlink" href="#b-web-page-in-xhtml" title="Permanent link">#</a></h4>
<ol>
<li>The <code>f:metadata</code> and <code>f:viewAction</code> tags are used to load variables
(prepared in the <code>prepareForStep</code> method of the custom script). These
variables are rendered on the UI page.
<div class="highlight"><pre><span></span><code>&lt;f:metadata&gt;
   &lt;f:viewAction action=&quot;#{authenticator.prepareAuthenticationForStep}&quot;
     if=&quot;#{not identity.loggedIn}&quot; /&gt;
 &lt;/f:metadata&gt;
</code></pre></div></li>
<li>A form submit takes the flow to the <code>authenticate()</code> method of the custom script.
<div class="highlight"><pre><span></span><code>&lt;h:commandButton id=&quot;updateButton&quot; value=&quot;Update&quot;
               styleClass=&quot;btn btn-primary col-sm-4&quot;
               action=&quot;#{authenticator.authenticate}&quot; style=&quot;margin:5px;&quot; /&gt;
</code></pre></div></li>
</ol>
<h4 id="c-page-customizations">c. Page customizations:<a class="headerlink" href="#c-page-customizations" title="Permanent link">#</a></h4>
<p>The Jans-auth server comes with a default set of pages for login, logout,
errors, authorizations. You can easily override these pages or write new ones.
You can easily apply your own stylesheet, images and resource-bundles to your
pages.</p>
<p>This <a href="#c-page-customizations">article</a> covers all the details you need to write your own web page.</p>
<h3 id="c-business-logic-in-custom-script">C. Business logic in Custom script:<a class="headerlink" href="#c-business-logic-in-custom-script" title="Permanent link">#</a></h3>
<p>Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans.
The most important aspects of business logic are implemented through a set of
beans. Details and examples of this can be found in this <a href="../../../janssen-server/developer/managed-beans/">article</a></p>
<h3 id="d-third-party-libraries-for-use-in-the-custom-script">D. Third-party libraries for use in the custom script<a class="headerlink" href="#d-third-party-libraries-for-use-in-the-custom-script" title="Permanent link">#</a></h3>
<p>Java or Python libraries to be imported and used with ease. Remember, you
can import a python library only if it has been written in "pure python".
More details of this mentioned <a href="../../../janssen-server/developer/scripts/">here</a></p>
<h3 id="e-configuring-the-acr-parameter-in-the-jans-auth-server">E. Configuring the <code>acr</code> parameter in the Jans-auth server:<a class="headerlink" href="#e-configuring-the-acr-parameter-in-the-jans-auth-server" title="Permanent link">#</a></h3>
<p>The <code>acr</code> parameter can be configured in the following ways :</p>
<h4 id="default-authentication-method">Default authentication method:<a class="headerlink" href="#default-authentication-method" title="Permanent link">#</a></h4>
<p><code>default_acr</code>: This is the default authentication mechanism exposed to all
applications that send users to the Janssen Server for sign-in. Unless an app
specifically requests a different form of authentication using the
OpenID Connect acr_values parameter (as specified below), users will receive
the form of authentication specified in this field.</p>
<h4 id="internal-acr">Internal ACR<a class="headerlink" href="#internal-acr" title="Permanent link">#</a></h4>
<p>If a default ACR is not specified, Janssen will determine it based on enabled
scripts and the internal user/password ACR. This internal ACR,
<code>simple_password_auth</code>, is set to level -1. This means that it has lower
priority than any scripts, so Janssen server will use it only if no other
authentication method is set.</p>
<p>Use the jans-cli to <a href="https://github.com/JanssenProject/jans-cli/edit/main/docs/cli/cli-default-authentication-method.md">update / look-up the default authentication method</a>.</p>
<h4 id="authentication-method-for-a-client-rp">Authentication method for a client (RP):<a class="headerlink" href="#authentication-method-for-a-client-rp" title="Permanent link">#</a></h4>
<p>A client may also specify <code>default_acr_values</code> during registration
(and omit the parameter <code>acr_values</code> while making an authentication request).</p>
<h4 id="multiple-authentication-mechanisms">Multiple Authentication Mechanisms<a class="headerlink" href="#multiple-authentication-mechanisms" title="Permanent link">#</a></h4>
<p>The Jans Server can concurrently support multiple authentication mechanisms,
enabling Web and mobile apps (clients) to request a specific type of
authentication using the standard OpenID Connect request parameter: <code>acr_values</code>.
Learn more about acr_values in the <a href="http://openid.net/specs/openid-connect-core-1_0.html#acrSemantics">OpenID Connect core spec</a>.</p>
<h4 id="enabling-an-authentication-mechanism">Enabling an authentication mechanism<a class="headerlink" href="#enabling-an-authentication-mechanism" title="Permanent link">#</a></h4>
<p>An Authentication method is offered by the AS if its ACR value i.e. its
corresponding custom script is <code>enabled</code>.</p>
<p>By default, users will get the default authentication mechanism as
specified above. However, <strong>using the OpenID Connect acr_values parameter,
web and mobile clients can request any enabled authentication mechanism</strong>.</p>
<ol>
<li>
<p>Obtain the json contents of a custom script by using a jans-cli command like <code>get-config-scripts-by-type</code>, <code>get-config-scripts-by-inum</code> etc.
        Example :
         - <code>/opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION</code>
         - <code>/opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7</code></p>
</li>
<li>
<p><a href="https://github.com/JanssenProject/jans-cli/blob/main/docs/cli/cli-custom-scripts.md#update-an-existing-custom-script">Update the custom script</a> and change the <code>enabled</code> attribute to <code>true</code></p>
</li>
</ol>
<h4 id="level-rank-of-an-authentication-mechanism">Level (rank) of an Authentication mechanism :<a class="headerlink" href="#level-rank-of-an-authentication-mechanism" title="Permanent link">#</a></h4>
<p>Each authentication mechanism (script) has a "Level" assigned to it which
describes how secure and reliable it is. <strong>The higher the "Level", higher is
the reliability represented by the script.</strong> Though several mechanisms can be
enabled at the same Janssen server instance at the same time, for any specific
user's session only one of them can be set as the current one (and will be
returned as <code>acr</code> claim of id_token for them). If after initial session is
created a new authorization request from a RP comes in specifying another
authentication method, its "Level" will be compared to that of the method
currently associated with this session. If requested method's "Level" is
lower or equal to it, nothing is changed and the usual SSO behavior is observed.
If it's higher (i.e. a more secure method is requested), it's not possible to
serve such request using the existing session's context, and user must
re-authenticate themselves to continue. If they succeed, a new session
becomes associated with that requested mechanism instead.</p>
<h3 id="f-using-person-authenticator-jansauthenticator-attribute">F. Using person authenticator <code>jansAuthenticator</code> attribute :<a class="headerlink" href="#f-using-person-authenticator-jansauthenticator-attribute" title="Permanent link">#</a></h3>
<p>The <code>jansAuthenticator</code> attribute can be used in cases when person authenticator
need to persist data between person logins. For example script can have
enrollment and authentication flows. And after enrollment it needs to store
data into user entry for later use in authentication flow.
To search by enrolled authenticator there is another multi-valued
attribute <code>jansExtUid</code>. This attribute has default DB index to quick search.
Both attributes are recommended to use in Jans since 1.1.1 version for better
compatibility in future.</p>
<h4 id="1-format-of-attributes">1. Format of attributes<a class="headerlink" href="#1-format-of-attributes" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>jansExtUid: [otp:xyz1, cert:xyz2, duo:xyz3, ...]
jansAuthenticator: {
   &quot;xyz1&quot;: {&quot;id&quot;: &quot;xyz1&quot;, &quot;type&quot;: &quot;otp&quot;, &quot;custom&quot;: {...}},
   &quot;xyz2&quot;: {&quot;id&quot;: &quot;xyz2&quot;, &quot;type&quot;: &quot;cert&quot;, &quot;custom&quot;: {...}},
   &quot;xyz3&quot;: {&quot;id&quot;: &quot;xyz3&quot;, &quot;type&quot;: &quot;duo&quot;, &quot;custom&quot;: {...}},
    ...
}
</code></pre></div>
<h4 id="2-sample-data">2. Sample data:<a class="headerlink" href="#2-sample-data" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>jansExtUid: [hotp:S9dO_qKQoOcpPk9GuStlNO9seoA=, cert:totp, duo:Nv7Dg7aP0wRPJd6NHjx1ai9bN9Y=]
jansAuthenticator:
{
  &quot;S9dO_qKQoOcpPk9GuStlNO9seoA=&quot;: {
    &quot;id&quot;: &quot;S9dO_qKQoOcpPk9GuStlNO9seoA=&quot;,
    &quot;type&quot;: &quot;hotp&quot;,
    &quot;custom&quot;: {
      &quot;movingFactor&quot;: 3
    }
  },
  &quot;Nv7Dg7aP0wRPJd6NHjx1ai9bN9Y=&quot;: {
    &quot;id&quot;: &quot;Nv7Dg7aP0wRPJd6NHjx1ai9bN9Y=&quot;,
    &quot;type&quot;: &quot;totp&quot;
  }
}
</code></pre></div>
<h4 id="2-access-jansauthenticator-and-jansextuid-from-generic-bean">2. Access <code>jansAuthenticator</code> and <code>jansExtUid</code> from generic bean<a class="headerlink" href="#2-access-jansauthenticator-and-jansextuid-from-generic-bean" title="Permanent link">#</a></h4>
<p>For both attributes there are get/set methods in <code>User</code> entry. After loading
user object script can call these methods to get required data.</p>
<div class="highlight"><pre><span></span><code>...
    @AttributeName(name = &quot;jansExtUid&quot;)
    private String[] externalUid;

    @JsonObject
    @AttributeName(name = &quot;jansAuthenticator&quot;)
    private UserAuthenticatorList authenticator
...
        public String[] getExternalUid() {
                return externalUid;
        }

        public void setExternalUid(String[] externalUid) {
                this.externalUid = externalUid;
        }

        public UserAuthenticatorList getAuthenticator() {
                return authenticator;
        }

        public void setAuthenticator(UserAuthenticatorList authenticator) {
                this.authenticator = authenticator;
        }
...
</code></pre></div>
<p><code>UserAuthenticatorList</code> is defined <a href="https://github.com/JanssenProject/jans/blob/main/jans-core/model/src/main/java/io/jans/model/user/authenticator/UserAuthenticatorList.java">here</a>. It contains list
of <code>UserAuthenticator</code> objects. <code>UserAuthenticator</code> is defined <a href="https://github.com/JanssenProject/jans/blob/main/jans-core/model/src/main/java/io/jans/model/user/authenticator/UserAuthenticator.java">here</a></p>
<p>For convenience in 1.1.1 there is new service <code>UserAuthenticator</code>. See it's
code <a href="https://github.com/JanssenProject/jans/blob/main/jans-core/model/src/main/java/io/jans/model/user/authenticator/UserAuthenticator.java">here</a></p>
<p>It provides next API methods:</p>
<div class="highlight"><pre><span></span><code>        public UserAuthenticatorList getUserAuthenticatorList(SimpleUser user);

        public List&lt;UserAuthenticator&gt; getUserAuthenticatorsByType(SimpleUser user, String type);

        public UserAuthenticator getUserAuthenticatorById(SimpleUser user, String id);

        public void addUserAuthenticator(SimpleUser user, UserAuthenticator userAuthenticator);

        public void removeUserAuthenticator(SimpleUser user, UserAuthenticator userAuthenticator);

        public void removeUserAuthenticator(SimpleUser user, String type);

        public UserAuthenticator createUserAuthenticator(String id, String type);

        public UserAuthenticator createUserAuthenticator(String id, String type, Map&lt;String, Object&gt; custom);

        public String formatExternalUid(String id, String type);

        public boolean checkAndMigrateToAuthenticatorList(SimpleUser user);
</code></pre></div>
<p>All these methods update both <code>jansAuthenticator</code> and <code>jansExtUid</code> attributes
without persisting changes to DB. After calling these methods script should
persist user entry. It's expected behaviour because script might update other
fields too. Hence it's better to persist all changes in one update request to DB.</p>
<h2 id="usage-scenarios">Usage scenarios<a class="headerlink" href="#usage-scenarios" title="Permanent link">#</a></h2>
<h3 id="a-implementing-2fa-authentication-mechanisms">A. Implementing 2FA authentication mechanisms<a class="headerlink" href="#a-implementing-2fa-authentication-mechanisms" title="Permanent link">#</a></h3>
<ol>
<li>
<p><a href="../fido2-external-authenticator/">FIDO2</a> : Authentications using platform authenticators embedded into a person's device or physical USB, NFC or Bluetooth security keys that are inserted into a USB slot of a computer</p>
</li>
<li>
<p><a href="../../../script-catalog/person_authentication/otp-external-authenticator">OTP authentication</a> : Authentication mechanism using an app like <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en">Google authenticator</a>, <a href="https://freeotp.github.io/">FreeOTP</a> or <a href="https://authy.com/">Authy</a> that implements the open standards <a href="https://tools.ietf.org/html/rfc4226">HOTP</a> and <a href="https://tools.ietf.org/html/rfc6238">TOTP</a></p>
</li>
<li>
<p>SMS OTP :</p>
</li>
<li>
<p>Email OTP:</p>
</li>
</ol>
<h3 id="b-implementing-multistep-authentication">B. Implementing Multistep authentication<a class="headerlink" href="#b-implementing-multistep-authentication" title="Permanent link">#</a></h3>
<ol>
<li><a href="https://github.com/JanssenProject/jans/blob/main/jans-linux-setup/jans_setup/static/extension/person_authentication/other/basic.reset_to_step/BasicResetToStepExternalAuthenticator.py">Redirect to previous step</a>: The script here is an example of how the number of steps can be varied depending on the context or business requirement.</li>
</ol>
<h3 id="c-implementing-social-logins">C. Implementing Social logins<a class="headerlink" href="#c-implementing-social-logins" title="Permanent link">#</a></h3>
<p>You can use a <code>PersonAuthenticationType</code> script to allow users to sign using
credentials from popular <strong>Social Identity providers</strong> or
<strong>Inbound Identity Providers</strong> like Facebook, Google and Apple. After users
authenticate, their Social Identity Provider credentials are provisioned into
the Jans-auth server. More on this topic in this <a href="../../../janssen-server/recipes/social-login/">article</a></p>
<h3 id="d-proactively-perform-fraud-detection">D. Proactively perform fraud detection<a class="headerlink" href="#d-proactively-perform-fraud-detection" title="Permanent link">#</a></h3>
<ol>
<li>Impossible travel</li>
</ol>
<h2 id="testing-an-authentication-flow">Testing an authentication flow<a class="headerlink" href="#testing-an-authentication-flow" title="Permanent link">#</a></h2>
<p>An example of a complete URL looks like this -
                ```</p>
<div class="codehilite"><pre><span></span><code><span class="w">            </span><span class="nx">https</span><span class="p">:</span><span class="c1">//&lt;your.jans.server&gt;/jans-auth/authorize.htm? \</span>
<span class="w">            </span><span class="nx">response_type</span><span class="p">=</span><span class="nx">code</span><span class="o">&amp;</span><span class="nx">redirect_uri</span><span class="p">=</span><span class="nx">https</span><span class="p">:</span><span class="c1">//&lt;your.jans.server&gt;/admin \</span>
<span class="w">            </span><span class="o">&amp;</span><span class="nx">client_id</span><span class="p">=</span><span class="mi">17</span><span class="nx">b8b82e</span><span class="o">-</span><span class="nx">b3ec</span><span class="o">-</span><span class="mi">42</span><span class="nx">a2</span><span class="o">-</span><span class="nx">bd90</span><span class="o">-</span><span class="mi">097028</span><span class="nx">a37f3</span><span class="w"> </span>\
<span class="w">            </span><span class="o">&amp;</span><span class="nx">scope</span><span class="p">=</span><span class="nx">openid</span><span class="o">+</span><span class="nx">profile</span><span class="o">+</span><span class="nx">email</span><span class="o">+</span><span class="nx">user_name</span><span class="w"> </span>\
<span class="w">            </span><span class="o">&amp;</span><span class="nx">state</span><span class="p">=</span><span class="nx">faad2cdjfdddjfkdf</span><span class="o">&amp;</span><span class="nx">nonce</span><span class="p">=</span><span class="nx">dajdffdfsdcfff</span>
<span class="w">    </span><span class="err">```</span>
</code></pre></div>

<p>To test , enter the complete URL for authorization in a browser or create a
simple webpage with a link that simulates the user sign-in attempt. If the
server is configured properly, the first page for the selected authentication
method will be displayed to the user.</p>
<h2 id="faqs">FAQs<a class="headerlink" href="#faqs" title="Permanent link">#</a></h2>
<h3 id="1-how-can-error-messages-be-displayed-on-a-web-page">1. How can error messages be displayed on a web page?<a class="headerlink" href="#1-how-can-error-messages-be-displayed-on-a-web-page" title="Permanent link">#</a></h3>
<ol>
<li>FacesMessage bean is used for this purpose.
        <div class="highlight"><pre><span></span><code>from org.jans.jsf2.message import FacesMessages
from org.jans.service.cdi.util import CdiUtil
from javax.faces.application import FacesMessage
...

facesMessages = CdiUtil.bean(FacesMessages)
facesMessages.setKeepMessages()
facesMessages.add(FacesMessage.SEVERITY_ERROR, &quot;Please enter a valid username&quot;)
</code></pre></div></li>
<li>The error will appear in the associated template using the following markup:
        <div class="highlight"><pre><span></span><code>...
&lt;h:messages /&gt;
...
</code></pre></div>
        See an example <a href="https://github.com/JanssenProject/jans/blob/685a1593fb53e2310cfa38fcd49db94f3453042f/jans-auth-server/server/src/main/webapp/WEB-INF/incl/layout/template.xhtml#L41">here</a></li>
</ol>
<h3 id="2-how-is-redirection-to-a-third-party-application-for-authentication-handled-in-a-script">2. How is redirection to a third party application for authentication handled in a script?<a class="headerlink" href="#2-how-is-redirection-to-a-third-party-application-for-authentication-handled-in-a-script" title="Permanent link">#</a></h3>
<p>For user authentication or consent gathering, there might be a need to redirect to a third-party application to perform some operation and return control to authentication steps of the custom script. Please apply these steps to a person authentication script in such a scenario:</p>
<ul>
<li>Return from def getPageForStep(self, step, context), a page /auth/method_name/redirect.html ; with content similar to the code snippet below -
        <code>def getPageForStep(self, step, context):
        return "/auth/method_name/redirect.html"</code></li>
<li>Contents of redirect.xhtml should take the flow to prepareForStep method
        <div class="highlight"><pre><span></span><code>...
    &lt;f:metadata&gt;
        &lt;f:viewAction action=&quot;#{authenticator.prepareForStep}&quot; if=&quot;#{not identity.loggedIn}&quot; /&gt;
    &lt;/f:metadata&gt;
</code></pre></div></li>
<li>In method prepareForStep prepare data needed for redirect and perform the redirection to the external service.
        <div class="highlight"><pre><span></span><code>def prepareForStep(self, step, context):
        .....
    facesService = CdiUtil.bean(FacesService)
    facesService.redirectToExternalURL(third_party_URL )

    return True
</code></pre></div></li>
<li>In order to resume flow after the redirection, invoke a similar URL to https://my.gluu.server/postlogin.htm?param=123 from the third party app which takes the flow back to the authenticate method of the custom script.
So create an xhtml page postlogin.xhtml which will look like this :
        <div class="highlight"><pre><span></span><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
   &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;

&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;&gt;

&lt;f:view transient=&quot;true&quot; contentType=&quot;text/html&quot;&gt;
    &lt;f:metadata&gt;
        &lt;f:viewAction action=&quot;#{authenticator.authenticateWithOutcome}&quot; /&gt;
    &lt;/f:metadata&gt;
&lt;/f:view&gt;

&lt;/html&gt;
</code></pre></div>
The <code>&lt;f:viewAction action="#{authenticator.authenticateWithOutcome}" /&gt;</code> in step 4 takes us to the authenticate method inside the custom script <code>def authenticate(self, configurationAttributes, requestParameters, step):</code>. Here you can</li>
<li>use parameters from request
        <div class="highlight"><pre><span></span><code>param = ServerUtil.getFirstValue(requestParameters, &quot;param-name&quot;))
</code></pre></div></li>
<li>
<p>perform the <code>state</code> check (state : Opaque value used to maintain state between the request and the callback.)</p>
</li>
<li>
<p>finally, return true or false from this method.</p>
</li>
</ul>
<h3 id="3-why-is-the-browser-taken-to-the-redirect-uri-even-if-the-authentication-was-not-successful">3. Why is the browser taken to the redirect URI even if the authentication was not successful?<a class="headerlink" href="#3-why-is-the-browser-taken-to-the-redirect-uri-even-if-the-authentication-was-not-successful" title="Permanent link">#</a></h3>
<p>By default, regardless of the authentication outcome, the redirect URI will be hit. You can control this behavior through the Authentication Server property <a href="../../../janssen-server/reference/json/properties/janssenauthserver-properties/#errorHandlingMethod">errorHandlingMethod</a>. Set its value to <code>internal</code> for the default error page to be shown instead.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="February 4, 2026 11:25:14 UTC"><span class="timeago" datetime="2026-02-04T11:25:14+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="February 4, 2026 11:25:14 UTC">2026-02-04</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="May 18, 2022 19:22:10 UTC"><span class="timeago" datetime="2022-05-18T19:22:10+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="May 18, 2022 19:22:10 UTC">2022-05-18</span>
  </span>

    
    
    
  </aside>





                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026, The Janssen Project
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/JanssenProject/jans" target="_blank" rel="noopener" title="Janssen on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://jans.io/docs" target="_blank" rel="noopener" title="Janssen Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2C505.9 32 576 102 576 188.5c0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1C429.8 399.5 390 416 348.5 416 262.1 416 192 346 192 259.5c0-1.5 0-3 .1-4.5.5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9v2.6c0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zm-144.3 77.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1l-71.1 71.1C73.8 275.5 64 299.1 64 323.6c0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2C70.1 480.2 0 410.2 0 323.7c0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9v3.9c-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8v-2.3c0-33.7-18-63.3-44.8-79.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.prune", "navigation.path", "navigation.top", "navigation.instant", "navigation.instant.progress", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    

      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../javascripts/skeleton-loader.js"></script>
      
        <script src="../../../javascripts/full-screen-sections.js"></script>
      
    
<!--Release automation scripts should replace the placeholder with actual URL-->
<!--for Scarf pixel. This will be done when docs are released into PROD. Not-->
<!--when releasing for HEAD or nightly builds. This is to ensure that Scarf -->
<!--is only tracking the user behaviour on the PROD release docs. HEAD and -->
<!--nightly docs may be used extensively by development team and contributors-->
<!--for testing purposes-->
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2c347abc-a9b4-4c4b-bdc9-2682edbcc0c9"
     width="0" height="0"/>


  </body>
</html>