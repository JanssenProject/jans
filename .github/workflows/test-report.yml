name: 'Test Report'
on:
  workflow_run:
    workflows: ['Test Linux installer']
    types:
      - completed
jobs:
  report:
    runs-on: ubuntu-latest
    steps:
    - uses: dorny/test-reporter@v1
      id: go
      with:
        artifact: go-test-results
        name: Go Tests
        path: '*report.xml'
        reporter: java-junit
    - name: Download artifacts
      if: always()
      uses: actions/download-artifact@v3
      with:
        path: /tmp/results
    - name: Unzip test results
      if: always()
      run: |
        ls -la /tmp/results
        unzip -o /tmp/results/java-test-results.zip
        ls -la
    - uses: dorny/test-reporter@v1
      if: always()
      id: java
      with:
        artifact: go-test-results
        name: Java Tests
        path: 'MYSQL-jans-auth-client-testng-results.xml'
        reporter: java-junit