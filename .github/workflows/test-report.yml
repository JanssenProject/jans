name: 'Test Report'
on:
  workflow_run:
    workflows: ['Test Linux installer']
    types:
      - completed
jobs:
  report:
    runs-on: ubuntu-latest
    steps:
    - uses: dorny/test-reporter@v1
      id: go
      with:
        artifact: go-test-results
        name: Go Tests
        path: '*report.xml'
        reporter: java-junit
    - uses: actions/download-artifact@v3
      if: always()
      with:
        name: java-test-results
        path: /tmp/java-test-results
    - name: Unzip artifact
      if: always()
      run: |
        unzip -o /tmp/java-test-results/java-test-results.zip -d /tmp/java-test-results
        ls -la /tmp/java-test-results
    - name: Publish Test Report
      if: always()
      uses: scacap/action-surefire-report@v1
      with:
        report_paths: '**/tmp/java-test-results/*testng-results.xml'
