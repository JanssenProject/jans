---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "jans_tokens Data Source - jans"
subcategory: ""
description: |-
  Data source for searching and retrieving tokens from Janssen server.
  This data source allows you to search for OAuth access tokens and refresh tokens in the Janssen
  authorization server. You can retrieve token metadata including client ID, grant type, creation
  and expiration dates, and token scopes. Supports pagination for handling large token sets.
  Example Usage
  
  # Search tokens with pagination
  data "jans_tokens" "recent_tokens" {
    limit = 10
  }
  
  # Search tokens for specific client
  data "jans_tokens" "client_tokens" {
    client_id = "client123"
    limit     = 50
  }
  
  # Output access tokens only
  output "access_tokens" {
    value = [
      for token in data.jans_tokens.recent_tokens.tokens :
      token if token.token_type == "access_token"
    ]
    sensitive = true
  }
  
  OAuth Scopes Required
  https://jans.io/oauth/config/token.readonly
---

# jans_tokens (Data Source)

Data source for searching and retrieving tokens from Janssen server.

This data source allows you to search for OAuth access tokens and refresh tokens in the Janssen
authorization server. You can retrieve token metadata including client ID, grant type, creation
and expiration dates, and token scopes. Supports pagination for handling large token sets.

## Example Usage

```hcl
# Search tokens with pagination
data "jans_tokens" "recent_tokens" {
  limit = 10
}

# Search tokens for specific client
data "jans_tokens" "client_tokens" {
  client_id = "client123"
  limit     = 50
}

# Output access tokens only
output "access_tokens" {
  value = [
    for token in data.jans_tokens.recent_tokens.tokens :
    token if token.token_type == "access_token"
  ]
  sensitive = true
}
```

## OAuth Scopes Required

- `https://jans.io/oauth/config/token.readonly`

## Example Usage

```terraform
# Configure the Janssen Provider
terraform {
  required_providers {
    jans = {
      source = "jans/jans"
    }
  }
}

provider "jans" {
  url           = "https://moabu-noble-sawfish.gluu.info"
  client_id     = var.client_id
  client_secret = var.client_secret
  insecure_client = true  # Only for development/testing
}

# Data source to search tokens with pagination
data "jans_tokens" "recent_tokens" {
  limit = 10
}

# Output the tokens
output "tokens" {
  value = data.jans_tokens.recent_tokens.tokens
  sensitive = true  # Token information is sensitive
}

# Output token count
output "token_count" {
  value = length(data.jans_tokens.recent_tokens.tokens)
}

# Output access tokens only
output "access_tokens" {
  value = [
    for token in data.jans_tokens.recent_tokens.tokens :
    {
      code       = token.token_code
      client_id  = token.client_id
      grant_type = token.grant_type
      created    = token.creation_date
    } if token.token_type == "access_token"
  ]
  sensitive = true
  description = "Only access tokens"
}

# Example: Search for tokens by client ID pattern
data "jans_tokens" "client_tokens" {
  limit = 50
}

output "client_specific_tokens" {
  value = [
    for token in data.jans_tokens.client_tokens.tokens :
    token if can(regex("9876baac", token.client_id))
  ]
  sensitive = true
  description = "Tokens for specific client"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `client_id` (String) Client ID to filter tokens by specific client
- `limit` (Number) Maximum number of results to return
- `pattern` (String) Search pattern for filtering tokens
- `start_index` (Number) The 1-based index of the first query result

### Read-Only

- `entries_count` (Number) Number of entries returned in this result
- `id` (String) The ID of this resource.
- `start` (Number) Start index of the returned results
- `tokens` (List of Object) List of tokens (see [below for nested schema](#nestedatt--tokens))
- `total_entries` (Number) Total number of entries available

<a id="nestedatt--tokens"></a>
### Nested Schema for `tokens`

Read-Only:

- `authorization_code` (String)
- `client_id` (String)
- `creation_date` (String)
- `dn` (String)
- `expiration_date` (String)
- `grant_type` (String)
- `scope` (String)
- `token_code` (String)
- `token_type` (String)
- `user_id` (String)
