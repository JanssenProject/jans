---
page_title: "jans_token_revocation Resource - jans"
subcategory: ""
description: |-
  Resource for revoking OAuth tokens.
---

# jans_token_revocation (Resource)

Resource for revoking OAuth tokens. This is a command-style resource that revokes tokens on create/update.

This resource revokes a specific OAuth access token or refresh token identified by its token code.
Use this for security operations such as emergency token revocation, token rotation, or implementing
token lifecycle management. The resource supports triggers to re-execute revocation when specified
values change.

## Example Usage

### Basic Token Revocation

```terraform
# Revoke a specific token
resource "jans_token_revocation" "revoke_token" {
  token_code = var.token_to_revoke
}

# Emergency revocation with triggers
resource "jans_token_revocation" "emergency" {
  token_code = var.compromised_token

  triggers = {
    alert_id  = var.security_alert_id
    timestamp = timestamp()
  }
}
```

### Token Rotation Scenario

```terraform
# Revoke old tokens when client secret is rotated
resource "jans_token_revocation" "rotate_tokens" {
  count = length(var.old_tokens)
  
  token_code = var.old_tokens[count.index]

  triggers = {
    client_secret_version = var.client_secret_version
  }
}
```

### Complete Configuration Example

```terraform
terraform {
  required_providers {
    jans = {
      source = "jans/jans"
    }
  }
}

provider "jans" {
  url           = "https://your-janssen-server.example.com"
  client_id     = var.client_id
  client_secret = var.client_secret
}

# Revoke on client deactivation
resource "jans_token_revocation" "revoke_on_client_removal" {
  for_each = toset(var.tokens_to_revoke)
  
  token_code = each.value

  triggers = {
    client_id = var.deactivated_client_id
  }
}

variable "tokens_to_revoke" {
  description = "List of token codes to revoke"
  type        = list(string)
  sensitive   = true
  default     = []
}

variable "deactivated_client_id" {
  description = "Client ID being deactivated"
  type        = string
}
```

## OAuth Scopes Required

- `https://jans.io/oauth/config/token.delete`

## Known Issues

None currently known. The resource correctly handles both successful revocations and 404 responses
for non-existent tokens.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `token_code` (String) Token code to revoke

### Optional

- `triggers` (Map of String) Map of values which should trigger a token revocation when changed

### Read-Only

- `id` (String) The ID of this resource.
